<!DOCTYPE html>
<html>

<head>
  <script
  src="https://code.jquery.com/jquery-3.3.0.min.js"
  integrity="sha256-RTQy8VOmNlT6b2PIRur37p6JEBZUE7o8wPgMvu18MC4="
  crossorigin="anonymous"></script>
  <script src="js/pepe.js"></script>
  
  <style>
	textarea {
	  width: 100%
	}

	pre {
	  white-space: pre-wrap;
	}
  </style>
</head>

<body>

<p>Code <button onclick="gettext()">Generate text</button></p>
<textarea id="code" rows="15"></textarea>
<p>Input</p>
<textarea id="input"></textarea>
<button id="run">Run</button>

<p>Output</p>
<pre id="output"></pre>
<p>Debug</p>
<pre id="debug"></pre>

<script>
var gettext = function(){alert("Wait a bit, please!")};
 $(function() {
 
 
	gettext = function() {
		var val = prompt("Enter text");
		var res = "";
		for (let i = 0; i < val.length; i++) { // For each, except first, letter
			var ch = val.charCodeAt(i).toString(2).padStart(8, "e");
			console.log(ch);
			ch = ch.replace(/1/g, "E");
			ch = ch.replace(/0/g, "e");
			res += " re"+ch;
		}
		$("#code").val($("#code").val()+res);
	}

  
    
    try {
    	$("#run").click(function(){
      	$("#debug, #output").text("");
    		$("#output").text(pepe($("#code").val(), $("#input").val(), function(){
        	var d = $("#debug");
          var args = Array.prototype.slice.call(arguments);
        	d.text(d.text()+args.join(" ")+"\n");
          return arguments[0];
        }));
      });
    } catch(a) {
    	console.log("Error caught");
    	$("#debug").text(a.message);
    }
});
</script>
</body>

</html>
